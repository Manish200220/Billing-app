{"ast":null,"code":"import _objectSpread from\"C:/Users/mk213/Downloads/billing-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";import Invoice from\"./Invoice\";// Billing App â€” fixed full JSX and working Invoice History viewer\n// Features included:\n// - Products with category, price and stock\n// - Add / Purchase / Delete product\n// - Create invoice from cart, finalize (autosave + auto-download JSON + auto-generate PDF)\n// - Invoices are stored in localStorage\n// - Invoice history with one-click View (modal) and per-invoice JSON/PDF download\n// - Small pure-function tests and a \"Run tests\" button\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BillingApp(){const COMPANY_NAME=\"RKGROWOPAL MARKETINGS PVT. LTD.\";const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[formProd,setFormProd]=useState({name:\"\",category:\"\",mrp:\"\",bv:\"\",stock:\"\"});const[cart,setCart]=useState([]);const[customer,setCustomer]=useState({name:\"\",address:\"\",phone:\"\"});const[paid,setPaid]=useState(0);const[invoiceDate,setInvoiceDate]=useState(new Date().toISOString().split('T')[0]);const[useMRP,setUseMRP]=useState(false);const[isFinalizing,setIsFinalizing]=useState(false);const invoiceRef=useRef(null);const[invoices,setInvoices]=useState([]);const[selectedInvoice,setSelectedInvoice]=useState(null);const selectedInvoiceRef=useRef(null);// for PDF generation of selected invoice\nconst[filterCategory,setFilterCategory]=useState(\"\");const[testResults,setTestResults]=useState([]);const[isExportingBulk,setIsExportingBulk]=useState(false);const COMPANY_EMAIL=\"rkgrowopal@gmail.com\";const COMPANY_PHONE=\"+91 74287 11520\";const COMPANY_ADDRESS=\"Block-B3,Near Punjab National Bank Road Mukund Vihar,Prakash Vihar,karawal Nagar,Delhi-11009, New Delhi, Delhi 110090\";// Load persisted state\nuseEffect(()=>{try{const p=JSON.parse(localStorage.getItem('rk_products')||'[]');const inv=JSON.parse(localStorage.getItem('rk_invoices')||'[]');setProducts(p);setInvoices(inv);const cats=Array.from(new Set(p.map(x=>x.category).filter(Boolean)));setCategories(cats);}catch(e){console.error('load error',e);}},[]);useEffect(()=>{try{localStorage.setItem('rk_products',JSON.stringify(products));}catch(e){console.error(e);}const cats=Array.from(new Set(products.map(x=>x.category).filter(Boolean)));setCategories(cats);},[products]);useEffect(()=>{try{localStorage.setItem('rk_invoices',JSON.stringify(invoices));}catch(e){console.error(e);}},[invoices]);// Product management\nfunction addProduct(e){if(e&&e.preventDefault)e.preventDefault();const name=(formProd.name||\"\").trim();const category=(formProd.category||\"\").trim();const mrp=Number(formProd.mrp);const bv=Number(formProd.bv)||0;const stock=parseInt(formProd.stock)||0;if(!name)return alert('Enter product name');if(!Number.isFinite(mrp)||mrp<0)return alert('Enter valid MRP');const id=products.length?Math.max(...products.map(p=>p.id))+1:1;const price=Math.round(mrp*0.9*100)/100;// DP = 10% discount on MRP\nconst next=[...products,{id,name,category,mrp,bv,price,stock}];setProducts(next);setFormProd({name:\"\",category:\"\",mrp:\"\",bv:\"\",stock:\"\"});}function updateStock(id,delta){setProducts(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{stock:Math.max(0,p.stock+delta)}):p));}function deleteProduct(id){if(!confirm('Delete product?'))return;setProducts(prev=>prev.filter(p=>p.id!==id));setCart(prev=>prev.filter(c=>c.productId!==id));}// Cart management\nfunction addToCart(productId){const p=products.find(x=>x.id===productId);if(!p)return alert('Product not found');if(p.stock<=0)return alert('Out of stock');updateStock(productId,-1);setCart(prev=>{var _p$mrp;const found=prev.find(x=>x.productId===productId);if(found)return prev.map(x=>x.productId===productId?_objectSpread(_objectSpread({},x),{},{qty:x.qty+1}):x);const mrp=Number((_p$mrp=p.mrp)!==null&&_p$mrp!==void 0?_p$mrp:p.price?Number(p.price)/0.9:0);return[...prev,{productId,name:p.name,category:p.category,price:p.price,mrp,bv:p.bv||0,qty:1}];});}function changeQty(productId,qty){qty=Math.max(0,parseInt(qty)||0);const item=cart.find(c=>c.productId===productId);if(!item)return;const delta=qty-item.qty;if(delta>0){const prod=products.find(p=>p.id===productId);if(!prod||prod.stock<delta)return alert('Not enough stock');updateStock(productId,-delta);}else if(delta<0){updateStock(productId,-delta);}setCart(prev=>prev.map(c=>c.productId===productId?_objectSpread(_objectSpread({},c),{},{qty}):c));}function removeFromCart(productId){const item=cart.find(c=>c.productId===productId);if(!item)return;updateStock(productId,item.qty);setCart(prev=>prev.filter(c=>c.productId!==productId));}function subtotal(){let c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:cart;return c.reduce((s,i)=>s+i.qty*(useMRP?i.mrp:i.price),0);}// Finalize invoice\nasync function finalizeInvoice(){let autoDownload=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(isFinalizing)return;// Prevent multiple submissions\nif(cart.length===0)return alert('Cart is empty');setIsFinalizing(true);const invNumber='INV-'+new Date().getTime().toString().slice(-8);const invoice={id:invNumber,date:new Date(invoiceDate).toISOString(),customer:_objectSpread({},customer),items:cart.map(c=>({productId:c.productId,name:c.name,qty:c.qty,price:c.price})),subtotal:subtotal(),paid:Number(paid||0),balance:subtotal()-Number(paid||0)};setInvoices(prev=>[invoice,...prev]);// Auto-download JSON\ntry{if(autoDownload){const blob=new Blob([JSON.stringify(invoice,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat(invoice.id,\".json\");document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);}}catch(e){console.error('JSON download failed',e);}// Generate PDF of invoice preview area (invoiceRef)\ntry{if(invoiceRef.current){const html2canvasModule=await import('html2canvas');const html2canvas=html2canvasModule&&(html2canvasModule.default||html2canvasModule);const jspdfModule=await import('jspdf');const jsPDF=jspdfModule&&(jspdfModule.jsPDF||jspdfModule.default||jspdfModule);if(html2canvas&&jsPDF){const canvas=await html2canvas(invoiceRef.current,{scale:2});const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF({unit:'pt',format:'a4'});const imgProps=pdf.getImageProperties(imgData);const pageWidth=pdf.internal.pageSize.getWidth();const pageHeight=pdf.internal.pageSize.getHeight();const scale=Math.min(pageWidth/imgProps.width,pageHeight/imgProps.height);const renderWidth=imgProps.width*scale;const renderHeight=imgProps.height*scale;const x=(pageWidth-renderWidth)/2;const y=(pageHeight-renderHeight)/2;pdf.addImage(imgData,'PNG',x,y,renderWidth,renderHeight);pdf.save(\"\".concat(invoice.id,\".pdf\"));}}}catch(err){console.error('PDF generation error',err);}// Clear current cart and customer\nsetCart([]);setCustomer({name:'',address:'',phone:''});setPaid(0);setInvoiceDate(new Date().toISOString().split('T')[0]);setIsFinalizing(false);alert('Invoice finalized and saved.');}function exportBackup(){try{const blobP=new Blob([JSON.stringify(products,null,2)],{type:'application/json'});const urlP=URL.createObjectURL(blobP);const a=document.createElement('a');a.href=urlP;a.download=\"products_\".concat(Date.now(),\".json\");document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(urlP);const blobI=new Blob([JSON.stringify(invoices,null,2)],{type:'application/json'});const urlI=URL.createObjectURL(blobI);const b=document.createElement('a');b.href=urlI;b.download=\"invoices_\".concat(Date.now(),\".json\");document.body.appendChild(b);b.click();b.remove();URL.revokeObjectURL(urlI);}catch(e){console.error(e);}}// Calculate summary statistics\nfunction getInvoiceSummary(){const totalBalance=invoices.reduce((sum,inv)=>sum+(inv.balance||0),0);const totalProductsSold=invoices.reduce((sum,inv)=>{var _inv$items;return sum+(((_inv$items=inv.items)===null||_inv$items===void 0?void 0:_inv$items.reduce((itemSum,item)=>itemSum+item.qty,0))||0);},0);const totalInvoices=invoices.length;return{totalBalance,totalProductsSold,totalInvoices};}// Bulk PDF export function\nasync function exportAllInvoicesPDF(){if(invoices.length===0)return alert('No invoices to export');if(isExportingBulk)return;setIsExportingBulk(true);try{const JSZip=(await import('jszip')).default;const zip=new JSZip();for(let i=0;i<invoices.length;i++){const invoice=invoices[i];// Create a temporary div for PDF generation\nconst tempDiv=document.createElement('div');tempDiv.style.position='absolute';tempDiv.style.left='-9999px';tempDiv.style.top='-9999px';document.body.appendChild(tempDiv);// Render invoice in temp div\nconst{createElement}=await import('react');const{createRoot}=await import('react-dom/client');const InvoiceComponent=(await import('./Invoice')).default;const root=createRoot(tempDiv);root.render(createElement(InvoiceComponent,{invoice:invoice,companyName:COMPANY_NAME,companyEmail:COMPANY_EMAIL,companyPhone:COMPANY_PHONE,companyAddress:COMPANY_ADDRESS}));// Wait for render\nawait new Promise(resolve=>setTimeout(resolve,100));// Generate PDF\nconst html2canvasModule=await import('html2canvas');const html2canvas=html2canvasModule&&(html2canvasModule.default||html2canvasModule);const jspdfModule=await import('jspdf');const jsPDF=jspdfModule&&(jspdfModule.jsPDF||jspdfModule.default||jspdfModule);if(html2canvas&&jsPDF){const canvas=await html2canvas(tempDiv,{scale:2});const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF({unit:'pt',format:'a4'});const imgProps=pdf.getImageProperties(imgData);const pageWidth=pdf.internal.pageSize.getWidth();const pageHeight=pdf.internal.pageSize.getHeight();const scale=Math.min(pageWidth/imgProps.width,pageHeight/imgProps.height);const renderWidth=imgProps.width*scale;const renderHeight=imgProps.height*scale;const x=(pageWidth-renderWidth)/2;const y=(pageHeight-renderHeight)/2;pdf.addImage(imgData,'PNG',x,y,renderWidth,renderHeight);// Add PDF to zip\nconst pdfBlob=pdf.output('blob');zip.file(\"\".concat(invoice.id,\".pdf\"),pdfBlob);}// Cleanup\nroot.unmount();document.body.removeChild(tempDiv);}// Generate and download zip\nconst zipBlob=await zip.generateAsync({type:'blob'});const url=URL.createObjectURL(zipBlob);const a=document.createElement('a');a.href=url;a.download=\"all_invoices_\".concat(Date.now(),\".zip\");document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);alert('All invoices exported as ZIP file!');}catch(err){console.error('Bulk export error:',err);alert('Error exporting invoices. Please try again.');}finally{setIsExportingBulk(false);}}// View invoice (single-click)\nfunction viewInvoice(inv){setSelectedInvoice(inv);// wait for modal to render then we can generate PDF if user requests\n}function closeInvoiceViewer(){setSelectedInvoice(null);}async function downloadInvoiceJSON(inv){try{const blob=new Blob([JSON.stringify(inv,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat(inv.id,\".json\");document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);}catch(e){console.error(e);}}async function downloadInvoicePDF(inv){// Render selected invoice details inside a hidden ref (selectedInvoiceRef) and generate PDF\nif(!selectedInvoiceRef.current){// If the viewer isn't open, open it first and then the user can click download inside the viewer.\nalert('Please open the invoice viewer and then click \"Download PDF\" inside it.');return;}try{const html2canvasModule=await import('html2canvas');const html2canvas=html2canvasModule&&(html2canvasModule.default||html2canvasModule);const jspdfModule=await import('jspdf');const jsPDF=jspdfModule&&(jspdfModule.jsPDF||jspdfModule.default||jspdfModule);if(html2canvas&&jsPDF){const canvas=await html2canvas(selectedInvoiceRef.current,{scale:2});const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF({unit:'pt',format:'a4'});const imgProps=pdf.getImageProperties(imgData);const pageWidth=pdf.internal.pageSize.getWidth();const pageHeight=pdf.internal.pageSize.getHeight();const scale=Math.min(pageWidth/imgProps.width,pageHeight/imgProps.height);const renderWidth=imgProps.width*scale;const renderHeight=imgProps.height*scale;const x=(pageWidth-renderWidth)/2;const y=(pageHeight-renderHeight)/2;pdf.addImage(imgData,'PNG',x,y,renderWidth,renderHeight);pdf.save(\"\".concat(inv.id,\".pdf\"));}}catch(err){console.error('PDF generation error',err);}}// --- Pure helper functions for tests ---\nfunction pureAddToCart(productsArr,cartArr,productId){const p=productsArr.find(x=>x.id===productId);if(!p)throw new Error('product-not-found');if(p.stock<=0)throw new Error('out-of-stock');const newProducts=productsArr.map(x=>x.id===productId?_objectSpread(_objectSpread({},x),{},{stock:x.stock-1}):x);const found=cartArr.find(c=>c.productId===productId);const newCart=found?cartArr.map(c=>c.productId===productId?_objectSpread(_objectSpread({},c),{},{qty:c.qty+1}):c):[...cartArr,{productId,name:p.name,price:p.price,qty:1}];return{products:newProducts,cart:newCart};}function pureChangeQty(productsArr,cartArr,productId,qty){qty=Math.max(0,parseInt(qty)||0);const item=cartArr.find(c=>c.productId===productId);if(!item)throw new Error('item-not-in-cart');const delta=qty-item.qty;if(delta>0){const prod=productsArr.find(p=>p.id===productId);if(!prod||prod.stock<delta)throw new Error('not-enough-stock');const newProducts=productsArr.map(p=>p.id===productId?_objectSpread(_objectSpread({},p),{},{stock:p.stock-delta}):p);const newCart=cartArr.map(c=>c.productId===productId?_objectSpread(_objectSpread({},c),{},{qty}):c);return{products:newProducts,cart:newCart};}else if(delta<0){const newProducts=productsArr.map(p=>p.id===productId?_objectSpread(_objectSpread({},p),{},{stock:p.stock+-delta}):p);const newCart=cartArr.map(c=>c.productId===productId?_objectSpread(_objectSpread({},c),{},{qty}):c);return{products:newProducts,cart:newCart};}return{products:productsArr,cart:cartArr};}function runTests(){const results=[];try{const p0=[{id:1,name:'X',price:100,stock:2}];const c0=[];const step1=pureAddToCart(p0,c0,1);results.push({test:'add once',pass:step1.products[0].stock===1&&step1.cart.length===1&&step1.cart[0].qty===1});const step2=pureAddToCart(step1.products,step1.cart,1);results.push({test:'add twice',pass:step2.products[0].stock===0&&step2.cart[0].qty===2});try{pureAddToCart(step2.products,step2.cart,1);results.push({test:'add third time should fail',pass:false});}catch(err){results.push({test:'add third time should fail',pass:err.message==='out-of-stock'});}const step3=pureChangeQty(step2.products,step2.cart,1,1);results.push({test:'change qty down',pass:step3.products[0].stock===1&&step3.cart[0].qty===1});const step4=pureChangeQty(step3.products,step3.cart,1,2);results.push({test:'change qty up',pass:step4.products[0].stock===0&&step4.cart[0].qty===2});}catch(err){results.push({test:'unexpected error',pass:false,error:String(err)});}setTestResults(results);}// --- Render UI ---\nreturn/*#__PURE__*/_jsxs(\"div\",{style:styles.page,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.header,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.company,children:COMPANY_NAME}),/*#__PURE__*/_jsx(\"div\",{style:styles.subtitle,children:\"Billing \\xB7 Inventory \\xB7 Categories \\xB7 Auto-PDF \\xB7 Auto-Save\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:()=>exportBackup(),children:\"Export Backup\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btn),{},{marginLeft:8}),onClick:()=>runTests(),children:\"Run tests\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{style:styles.grid,children:[/*#__PURE__*/_jsxs(\"section\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Products\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addProduct,style:{display:'grid',gap:8,marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Name\",value:formProd.name,onChange:e=>setFormProd(s=>_objectSpread(_objectSpread({},s),{},{name:e.target.value})),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Category\",value:formProd.category,onChange:e=>setFormProd(s=>_objectSpread(_objectSpread({},s),{},{category:e.target.value})),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"MRP\",value:formProd.mrp,onChange:e=>setFormProd(s=>_objectSpread(_objectSpread({},s),{},{mrp:e.target.value})),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"BV\",value:formProd.bv,onChange:e=>setFormProd(s=>_objectSpread(_objectSpread({},s),{},{bv:e.target.value})),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Stock\",value:formProd.stock,onChange:e=>setFormProd(s=>_objectSpread(_objectSpread({},s),{},{stock:e.target.value})),style:styles.input}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.btnAdd,children:\"Add Product\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.btn,onClick:()=>setProducts([]),children:\"Clear All Products\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:'12px 0'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginBottom:8},children:[/*#__PURE__*/_jsxs(\"select\",{value:filterCategory,onChange:e=>setFilterCategory(e.target.value),style:styles.inputSmall,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All categories\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Search\",style:_objectSpread(_objectSpread({},styles.inputSmall),{},{flex:1})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:320,overflow:'auto'},children:[products.length===0&&/*#__PURE__*/_jsx(\"div\",{style:styles.muted,children:\"No products\"}),products.filter(p=>!filterCategory||p.category===filterCategory).map(p=>{var _p$mrp2,_p$price,_p$bv;return/*#__PURE__*/_jsxs(\"div\",{style:styles.itemRow,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:p.name}),/*#__PURE__*/_jsxs(\"div\",{style:styles.small,children:[p.category,\" \\xB7 MRP: \\u20B9\",Number((_p$mrp2=p.mrp)!==null&&_p$mrp2!==void 0?_p$mrp2:p.price?Number(p.price)/0.9:0).toFixed(2),\" \\xB7 DP: \\u20B9\",Number((_p$price=p.price)!==null&&_p$price!==void 0?_p$price:0).toFixed(2),\" \\xB7 BV: \",Number((_p$bv=p.bv)!==null&&_p$bv!==void 0?_p$bv:0),\" \\xB7 Stock: \",p.stock]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:6},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimarySmall,onClick:()=>addToCart(p.id),children:\"Add to Invoice\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnSmall,onClick:()=>{const q=parseInt(prompt('Purchase qty','1')||'0');if(q>0)updateStock(p.id,q);},children:\"Purchase+\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnWarn,onClick:()=>deleteProduct(p.id),children:\"Delete\"})]})]},p.id);})]})]}),/*#__PURE__*/_jsxs(\"section\",{style:_objectSpread(_objectSpread({},styles.card),{},{flex:1}),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Invoice\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Customer name\",value:customer.name,onChange:e=>setCustomer(s=>_objectSpread(_objectSpread({},s),{},{name:e.target.value})),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Customer phone\",value:customer.phone,onChange:e=>setCustomer(s=>_objectSpread(_objectSpread({},s),{},{phone:e.target.value})),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Customer address\",value:customer.address,onChange:e=>setCustomer(s=>_objectSpread(_objectSpread({},s),{},{address:e.target.value})),style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:invoiceDate,onChange:e=>setInvoiceDate(e.target.value),style:_objectSpread(_objectSpread({},styles.input),{},{width:'200px',flex:'none'})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.input),{},{display:'flex',alignItems:'center',color:'#666',flex:1,justifyContent:'center'}),children:\"Invoice Date\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,marginTop:8,alignItems:'center'},children:/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:useMRP,onChange:e=>setUseMRP(e.target.checked),style:{margin:0}}),\"Use MRP for billing (instead of DP)\"]})}),/*#__PURE__*/_jsxs(\"div\",{ref:invoiceRef,style:{marginTop:12,padding:12,border:'1px solid #ddd',borderRadius:6,background:'#fff'},children:[/*#__PURE__*/_jsx(Invoice,{invoice:{id:'INV-'+new Date().getTime().toString().slice(-8),date:new Date(invoiceDate).toISOString(),customer:customer,items:cart.map(c=>({productId:c.productId,name:c.name,qty:c.qty,price:useMRP?c.mrp:c.price,mrp:c.mrp,bv:c.bv}))},companyName:COMPANY_NAME,companyEmail:COMPANY_EMAIL,companyPhone:COMPANY_PHONE,companyAddress:COMPANY_ADDRESS}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:20,display:'flex',justifyContent:'flex-end',alignItems:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8,fontWeight:800},children:[\"Balance: \\u20B9\",(subtotal()-Number(paid||0)).toFixed(2)]})})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:()=>finalizeInvoice(true),disabled:isFinalizing,children:isFinalizing?'Finalizing...':'Finalize Invoice (Auto-save & PDF)'}),/*#__PURE__*/_jsx(\"button\",{style:styles.btn,onClick:()=>{setCart([]);},children:\"Clear Cart\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnWarn,onClick:()=>{if(!confirm('Clear all invoices?'))return;setInvoices([]);localStorage.removeItem('rk_invoices');},children:\"Clear Invoices\"})]}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:'12px 0'}}),/*#__PURE__*/_jsx(\"h4\",{children:\"Invoices History\"}),invoices.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12,padding:12,backgroundColor:'#f8f9fa',borderRadius:6,border:'1px solid #e9ecef'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:12,textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:700,color:'#1e3a8a'},children:getInvoiceSummary().totalInvoices}),/*#__PURE__*/_jsx(\"div\",{style:styles.small,children:\"Total Invoices\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:18,fontWeight:700,color:'#28a745'},children:[\"\\u20B9\",getInvoiceSummary().totalBalance.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{style:styles.small,children:\"Total Balance\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:700,color:'#dc3545'},children:getInvoiceSummary().totalProductsSold}),/*#__PURE__*/_jsx(\"div\",{style:styles.small,children:\"Products Sold\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnPrimary),{},{marginRight:8}),onClick:exportAllInvoicesPDF,disabled:isExportingBulk,children:isExportingBulk?'Exporting...':'Export All PDFs (ZIP)'})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:160,overflow:'auto'},children:[invoices.length===0&&/*#__PURE__*/_jsx(\"div\",{style:styles.muted,children:\"No invoices yet\"}),invoices.map(inv=>{var _inv$items2;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:8,borderBottom:'1px solid #f0f0f0',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:inv.id}),/*#__PURE__*/_jsx(\"div\",{style:styles.small,children:new Date(inv.date).toLocaleString()}),/*#__PURE__*/_jsxs(\"div\",{style:styles.small,children:[\"Items: \",((_inv$items2=inv.items)===null||_inv$items2===void 0?void 0:_inv$items2.reduce((sum,item)=>sum+item.qty,0))||0]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Subtotal: \\u20B9\",Number(inv.subtotal).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.small,children:[\"Balance: \\u20B9\",Number(inv.balance).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:6},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnSmall,onClick:()=>viewInvoice(inv),children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnSmall),{},{marginLeft:6}),onClick:()=>downloadInvoiceJSON(inv),children:\"JSON\"})]})]})]},inv.id);})]})]})]}),selectedInvoice&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,onClick:closeInvoiceViewer,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modal,onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{ref:selectedInvoiceRef,children:/*#__PURE__*/_jsx(Invoice,{invoice:selectedInvoice,companyName:COMPANY_NAME,companyEmail:COMPANY_EMAIL,companyPhone:COMPANY_PHONE,companyAddress:COMPANY_ADDRESS})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',justifyContent:'flex-end',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btn,onClick:()=>downloadInvoiceJSON(selectedInvoice),children:\"Download JSON\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:()=>downloadInvoicePDF(selectedInvoice),children:\"Download PDF\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnWarn,onClick:()=>closeInvoiceViewer(),children:\"Close\"})]})]})}),testResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:styles.testBox,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Test results:\"}),/*#__PURE__*/_jsx(\"ul\",{children:testResults.map((t,i)=>/*#__PURE__*/_jsxs(\"li\",{style:{color:t.pass?'green':'crimson'},children:[t.test,\": \",t.pass?'PASS':'FAIL',\" \",t.error?\"(\".concat(t.error,\")\"):'']},i))})]}),/*#__PURE__*/_jsxs(\"footer\",{style:{marginTop:18,textAlign:'center',color:'#666'},children:[COMPANY_NAME,\" \\u2014 Billing software\"]})]});}const styles={page:{padding:18,fontFamily:'system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial',background:'#f6f8fa',minHeight:'100vh'},header:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:12},company:{fontSize:20,fontWeight:800,letterSpacing:0.4},subtitle:{color:'#666',marginTop:4},grid:{display:'grid',gridTemplateColumns:'360px 1fr',gap:16},card:{background:'#fff',padding:12,borderRadius:8,boxShadow:'0 1px 4px rgba(0,0,0,0.06)'},input:{width:'100%',padding:8,borderRadius:6,border:'1px solid #ddd'},inputSmall:{padding:8,borderRadius:6,border:'1px solid #ddd',minWidth:140},btn:{padding:'8px 10px',borderRadius:6,border:'1px solid #ccc',background:'#fff',cursor:'pointer'},btnAdd:{padding:'8px 10px',borderRadius:6,border:'none',background:'#2f9e44',color:'#fff',cursor:'pointer'},btnPrimary:{padding:'8px 12px',borderRadius:6,border:'none',background:'#0b63c6',color:'#fff',cursor:'pointer'},btnPrimarySmall:{padding:'6px 8px',borderRadius:6,border:'none',background:'#0b63c6',color:'#fff',cursor:'pointer'},btnSmall:{padding:'6px 8px',borderRadius:6,border:'1px solid #ccc',background:'#fff',cursor:'pointer'},btnWarn:{padding:'8px 12px',borderRadius:6,border:'none',background:'#d97706',color:'#fff',cursor:'pointer'},muted:{color:'#777'},small:{color:'#666',fontSize:12},itemRow:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:8,borderBottom:'1px solid #f0f0f0'},td:{padding:8,textAlign:'left',borderRight:'none'},modalOverlay:{position:'fixed',left:0,top:0,right:0,bottom:0,background:'rgba(0,0,0,0.4)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},modal:{background:'#fff',padding:16,borderRadius:8,width:'90%',maxWidth:800,maxHeight:'90%',overflow:'auto'},testBox:{position:'fixed',right:12,bottom:12,background:'#fff',padding:12,borderRadius:8,boxShadow:'0 2px 8px rgba(0,0,0,0.12)'}};","map":{"version":3,"names":["React","useEffect","useRef","useState","Invoice","jsx","_jsx","jsxs","_jsxs","BillingApp","COMPANY_NAME","products","setProducts","categories","setCategories","formProd","setFormProd","name","category","mrp","bv","stock","cart","setCart","customer","setCustomer","address","phone","paid","setPaid","invoiceDate","setInvoiceDate","Date","toISOString","split","useMRP","setUseMRP","isFinalizing","setIsFinalizing","invoiceRef","invoices","setInvoices","selectedInvoice","setSelectedInvoice","selectedInvoiceRef","filterCategory","setFilterCategory","testResults","setTestResults","isExportingBulk","setIsExportingBulk","COMPANY_EMAIL","COMPANY_PHONE","COMPANY_ADDRESS","p","JSON","parse","localStorage","getItem","inv","cats","Array","from","Set","map","x","filter","Boolean","e","console","error","setItem","stringify","addProduct","preventDefault","trim","Number","parseInt","alert","isFinite","id","length","Math","max","price","round","next","updateStock","delta","prev","_objectSpread","deleteProduct","confirm","c","productId","addToCart","find","_p$mrp","found","qty","changeQty","item","prod","removeFromCart","subtotal","arguments","undefined","reduce","s","i","finalizeInvoice","autoDownload","invNumber","getTime","toString","slice","invoice","date","items","balance","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","concat","body","appendChild","click","remove","revokeObjectURL","current","html2canvasModule","html2canvas","default","jspdfModule","jsPDF","canvas","scale","imgData","toDataURL","pdf","unit","format","imgProps","getImageProperties","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","min","width","height","renderWidth","renderHeight","y","addImage","save","err","exportBackup","blobP","urlP","now","blobI","urlI","b","getInvoiceSummary","totalBalance","sum","totalProductsSold","_inv$items","itemSum","totalInvoices","exportAllInvoicesPDF","JSZip","zip","tempDiv","style","position","left","top","createRoot","InvoiceComponent","root","render","companyName","companyEmail","companyPhone","companyAddress","Promise","resolve","setTimeout","pdfBlob","output","file","unmount","removeChild","zipBlob","generateAsync","viewInvoice","closeInvoiceViewer","downloadInvoiceJSON","downloadInvoicePDF","pureAddToCart","productsArr","cartArr","Error","newProducts","newCart","pureChangeQty","runTests","results","p0","c0","step1","push","test","pass","step2","message","step3","step4","String","styles","page","children","header","company","subtitle","textAlign","btnPrimary","onClick","btn","marginLeft","grid","card","onSubmit","display","gap","marginTop","placeholder","value","onChange","target","input","btnAdd","margin","marginBottom","inputSmall","flex","maxHeight","overflow","muted","_p$mrp2","_p$price","_p$bv","itemRow","fontWeight","small","toFixed","btnPrimarySmall","btnSmall","q","prompt","btnWarn","alignItems","color","justifyContent","checked","ref","padding","border","borderRadius","background","disabled","removeItem","backgroundColor","gridTemplateColumns","fontSize","marginRight","_inv$items2","borderBottom","toLocaleString","modalOverlay","modal","stopPropagation","testBox","t","fontFamily","minHeight","letterSpacing","boxShadow","minWidth","cursor","td","borderRight","right","bottom","zIndex","maxWidth"],"sources":["C:/Users/mk213/Downloads/billing-app/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Invoice from \"./Invoice\";\n\n// Billing App â€” fixed full JSX and working Invoice History viewer\n// Features included:\n// - Products with category, price and stock\n// - Add / Purchase / Delete product\n// - Create invoice from cart, finalize (autosave + auto-download JSON + auto-generate PDF)\n// - Invoices are stored in localStorage\n// - Invoice history with one-click View (modal) and per-invoice JSON/PDF download\n// - Small pure-function tests and a \"Run tests\" button\n\nexport default function BillingApp() {\n  const COMPANY_NAME = \"RKGROWOPAL MARKETINGS PVT. LTD.\";\n\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [formProd, setFormProd] = useState({ name: \"\", category: \"\", mrp: \"\", bv: \"\", stock: \"\" });\n\n  const [cart, setCart] = useState([]);\n  const [customer, setCustomer] = useState({ name: \"\", address: \"\", phone: \"\" });\n  const [paid, setPaid] = useState(0);\n  const [invoiceDate, setInvoiceDate] = useState(new Date().toISOString().split('T')[0]);\n  const [useMRP, setUseMRP] = useState(false);\n  const [isFinalizing, setIsFinalizing] = useState(false);\n  const invoiceRef = useRef(null);\n\n  const [invoices, setInvoices] = useState([]);\n  const [selectedInvoice, setSelectedInvoice] = useState(null);\n  const selectedInvoiceRef = useRef(null); // for PDF generation of selected invoice\n\n  const [filterCategory, setFilterCategory] = useState(\"\");\n  const [testResults, setTestResults] = useState([]);\n  const [isExportingBulk, setIsExportingBulk] = useState(false);\n\n  const COMPANY_EMAIL = \"rkgrowopal@gmail.com\";\n  const COMPANY_PHONE = \"+91 74287 11520\";\n  const COMPANY_ADDRESS = \"Block-B3,Near Punjab National Bank Road Mukund Vihar,Prakash Vihar,karawal Nagar,Delhi-11009, New Delhi, Delhi 110090\";\n\n  // Load persisted state\n  useEffect(() => {\n    try {\n      const p = JSON.parse(localStorage.getItem('rk_products') || '[]');\n      const inv = JSON.parse(localStorage.getItem('rk_invoices') || '[]');\n      setProducts(p);\n      setInvoices(inv);\n      const cats = Array.from(new Set(p.map(x => x.category).filter(Boolean)));\n      setCategories(cats);\n    } catch (e) { console.error('load error', e); }\n  }, []);\n\n  useEffect(() => {\n    try { localStorage.setItem('rk_products', JSON.stringify(products)); } catch (e) { console.error(e); }\n    const cats = Array.from(new Set(products.map(x => x.category).filter(Boolean)));\n    setCategories(cats);\n  }, [products]);\n\n  useEffect(() => {\n    try { localStorage.setItem('rk_invoices', JSON.stringify(invoices)); } catch (e) { console.error(e); }\n  }, [invoices]);\n\n  // Product management\n  function addProduct(e) {\n    if (e && e.preventDefault) e.preventDefault();\n    const name = (formProd.name || \"\").trim();\n    const category = (formProd.category || \"\").trim();\n    const mrp = Number(formProd.mrp);\n    const bv = Number(formProd.bv) || 0;\n    const stock = parseInt(formProd.stock) || 0;\n    if (!name) return alert('Enter product name');\n    if (!Number.isFinite(mrp) || mrp < 0) return alert('Enter valid MRP');\n    const id = products.length ? Math.max(...products.map(p => p.id)) + 1 : 1;\n    const price = Math.round(mrp * 0.9 * 100) / 100; // DP = 10% discount on MRP\n    const next = [...products, { id, name, category, mrp, bv, price, stock }];\n    setProducts(next);\n    setFormProd({ name: \"\", category: \"\", mrp: \"\", bv: \"\", stock: \"\" });\n  }\n\n  function updateStock(id, delta) {\n    setProducts(prev => prev.map(p => p.id === id ? { ...p, stock: Math.max(0, p.stock + delta) } : p));\n  }\n\n  function deleteProduct(id) {\n    if (!confirm('Delete product?')) return;\n    setProducts(prev => prev.filter(p => p.id !== id));\n    setCart(prev => prev.filter(c => c.productId !== id));\n  }\n\n  // Cart management\n  function addToCart(productId) {\n    const p = products.find(x => x.id === productId);\n    if (!p) return alert('Product not found');\n    if (p.stock <= 0) return alert('Out of stock');\n    updateStock(productId, -1);\n    setCart(prev => {\n      const found = prev.find(x => x.productId === productId);\n      if (found) return prev.map(x => x.productId === productId ? { ...x, qty: x.qty + 1 } : x);\n      const mrp = Number(p.mrp ?? ((p.price ? (Number(p.price) / 0.9) : 0)));\n      return [...prev, { productId, name: p.name, category: p.category, price: p.price, mrp, bv: p.bv || 0, qty: 1 }];\n    });\n  }\n\n  function changeQty(productId, qty) {\n    qty = Math.max(0, parseInt(qty) || 0);\n    const item = cart.find(c => c.productId === productId);\n    if (!item) return;\n    const delta = qty - item.qty;\n    if (delta > 0) {\n      const prod = products.find(p => p.id === productId);\n      if (!prod || prod.stock < delta) return alert('Not enough stock');\n      updateStock(productId, -delta);\n    } else if (delta < 0) {\n      updateStock(productId, -delta);\n    }\n    setCart(prev => prev.map(c => c.productId === productId ? { ...c, qty } : c));\n  }\n\n  function removeFromCart(productId) {\n    const item = cart.find(c => c.productId === productId);\n    if (!item) return;\n    updateStock(productId, item.qty);\n    setCart(prev => prev.filter(c => c.productId !== productId));\n  }\n\n  function subtotal(c = cart) {\n    return c.reduce((s, i) => s + (i.qty * (useMRP ? i.mrp : i.price)), 0);\n  }\n\n  // Finalize invoice\n  async function finalizeInvoice(autoDownload = true) {\n    if (isFinalizing) return; // Prevent multiple submissions\n    if (cart.length === 0) return alert('Cart is empty');\n    \n    setIsFinalizing(true);\n    const invNumber = 'INV-' + new Date().getTime().toString().slice(-8);\n    const invoice = {\n      id: invNumber,\n      date: new Date(invoiceDate).toISOString(),\n      customer: { ...customer },\n      items: cart.map(c => ({ productId: c.productId, name: c.name, qty: c.qty, price: c.price })),\n      subtotal: subtotal(),\n      paid: Number(paid || 0),\n      balance: subtotal() - Number(paid || 0)\n    };\n\n    setInvoices(prev => [invoice, ...prev]);\n\n    // Auto-download JSON\n    try {\n      if (autoDownload) {\n        const blob = new Blob([JSON.stringify(invoice, null, 2)], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${invoice.id}.json`;\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n        URL.revokeObjectURL(url);\n      }\n    } catch (e) { console.error('JSON download failed', e); }\n\n    // Generate PDF of invoice preview area (invoiceRef)\n    try {\n      if (invoiceRef.current) {\n        const html2canvasModule = await import('html2canvas');\n        const html2canvas = html2canvasModule && (html2canvasModule.default || html2canvasModule);\n        const jspdfModule = await import('jspdf');\n        const jsPDF = jspdfModule && (jspdfModule.jsPDF || jspdfModule.default || jspdfModule);\n        if (html2canvas && jsPDF) {\n          const canvas = await html2canvas(invoiceRef.current, { scale: 2 });\n          const imgData = canvas.toDataURL('image/png');\n          const pdf = new jsPDF({ unit: 'pt', format: 'a4' });\n          const imgProps = pdf.getImageProperties(imgData);\n          const pageWidth = pdf.internal.pageSize.getWidth();\n          const pageHeight = pdf.internal.pageSize.getHeight();\n          const scale = Math.min(pageWidth / imgProps.width, pageHeight / imgProps.height);\n          const renderWidth = imgProps.width * scale;\n          const renderHeight = imgProps.height * scale;\n          const x = (pageWidth - renderWidth) / 2;\n          const y = (pageHeight - renderHeight) / 2;\n          pdf.addImage(imgData, 'PNG', x, y, renderWidth, renderHeight);\n          pdf.save(`${invoice.id}.pdf`);\n        }\n      }\n    } catch (err) { console.error('PDF generation error', err); }\n\n    // Clear current cart and customer\n    setCart([]);\n    setCustomer({ name: '', address: '', phone: '' });\n    setPaid(0);\n    setInvoiceDate(new Date().toISOString().split('T')[0]);\n    setIsFinalizing(false);\n\n    alert('Invoice finalized and saved.');\n  }\n\n  function exportBackup() {\n    try {\n      const blobP = new Blob([JSON.stringify(products, null, 2)], { type: 'application/json' });\n      const urlP = URL.createObjectURL(blobP);\n      const a = document.createElement('a'); a.href = urlP; a.download = `products_${Date.now()}.json`; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(urlP);\n\n      const blobI = new Blob([JSON.stringify(invoices, null, 2)], { type: 'application/json' });\n      const urlI = URL.createObjectURL(blobI);\n      const b = document.createElement('a'); b.href = urlI; b.download = `invoices_${Date.now()}.json`; document.body.appendChild(b); b.click(); b.remove(); URL.revokeObjectURL(urlI);\n    } catch (e) { console.error(e); }\n  }\n\n  // Calculate summary statistics\n  function getInvoiceSummary() {\n    const totalBalance = invoices.reduce((sum, inv) => sum + (inv.balance || 0), 0);\n    const totalProductsSold = invoices.reduce((sum, inv) => \n      sum + (inv.items?.reduce((itemSum, item) => itemSum + item.qty, 0) || 0), 0\n    );\n    const totalInvoices = invoices.length;\n    return { totalBalance, totalProductsSold, totalInvoices };\n  }\n\n  // Bulk PDF export function\n  async function exportAllInvoicesPDF() {\n    if (invoices.length === 0) return alert('No invoices to export');\n    if (isExportingBulk) return;\n    \n    setIsExportingBulk(true);\n    try {\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n      \n      for (let i = 0; i < invoices.length; i++) {\n        const invoice = invoices[i];\n        // Create a temporary div for PDF generation\n        const tempDiv = document.createElement('div');\n        tempDiv.style.position = 'absolute';\n        tempDiv.style.left = '-9999px';\n        tempDiv.style.top = '-9999px';\n        document.body.appendChild(tempDiv);\n        \n        // Render invoice in temp div\n        const { createElement } = await import('react');\n        const { createRoot } = await import('react-dom/client');\n        const InvoiceComponent = (await import('./Invoice')).default;\n        \n        const root = createRoot(tempDiv);\n        root.render(createElement(InvoiceComponent, {\n          invoice: invoice,\n          companyName: COMPANY_NAME,\n          companyEmail: COMPANY_EMAIL,\n          companyPhone: COMPANY_PHONE,\n          companyAddress: COMPANY_ADDRESS\n        }));\n        \n        // Wait for render\n        await new Promise(resolve => setTimeout(resolve, 100));\n        \n        // Generate PDF\n        const html2canvasModule = await import('html2canvas');\n        const html2canvas = html2canvasModule && (html2canvasModule.default || html2canvasModule);\n        const jspdfModule = await import('jspdf');\n        const jsPDF = jspdfModule && (jspdfModule.jsPDF || jspdfModule.default || jspdfModule);\n        \n        if (html2canvas && jsPDF) {\n          const canvas = await html2canvas(tempDiv, { scale: 2 });\n          const imgData = canvas.toDataURL('image/png');\n          const pdf = new jsPDF({ unit: 'pt', format: 'a4' });\n          const imgProps = pdf.getImageProperties(imgData);\n          const pageWidth = pdf.internal.pageSize.getWidth();\n          const pageHeight = pdf.internal.pageSize.getHeight();\n          const scale = Math.min(pageWidth / imgProps.width, pageHeight / imgProps.height);\n          const renderWidth = imgProps.width * scale;\n          const renderHeight = imgProps.height * scale;\n          const x = (pageWidth - renderWidth) / 2;\n          const y = (pageHeight - renderHeight) / 2;\n          pdf.addImage(imgData, 'PNG', x, y, renderWidth, renderHeight);\n          \n          // Add PDF to zip\n          const pdfBlob = pdf.output('blob');\n          zip.file(`${invoice.id}.pdf`, pdfBlob);\n        }\n        \n        // Cleanup\n        root.unmount();\n        document.body.removeChild(tempDiv);\n      }\n      \n      // Generate and download zip\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      const url = URL.createObjectURL(zipBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `all_invoices_${Date.now()}.zip`;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      URL.revokeObjectURL(url);\n      \n      alert('All invoices exported as ZIP file!');\n    } catch (err) {\n      console.error('Bulk export error:', err);\n      alert('Error exporting invoices. Please try again.');\n    } finally {\n      setIsExportingBulk(false);\n    }\n  }\n\n  // View invoice (single-click)\n  function viewInvoice(inv) {\n    setSelectedInvoice(inv);\n    // wait for modal to render then we can generate PDF if user requests\n  }\n\n  function closeInvoiceViewer() {\n\n    setSelectedInvoice(null);\n  }\n\n  async function downloadInvoiceJSON(inv) {\n    try {\n      const blob = new Blob([JSON.stringify(inv, null, 2)], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a'); a.href = url; a.download = `${inv.id}.json`; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);\n    } catch (e) { console.error(e); }\n  }\n\n  async function downloadInvoicePDF(inv) {\n    // Render selected invoice details inside a hidden ref (selectedInvoiceRef) and generate PDF\n    if (!selectedInvoiceRef.current) {\n      // If the viewer isn't open, open it first and then the user can click download inside the viewer.\n      alert('Please open the invoice viewer and then click \"Download PDF\" inside it.');\n      return;\n    }\n    try {\n      const html2canvasModule = await import('html2canvas');\n      const html2canvas = html2canvasModule && (html2canvasModule.default || html2canvasModule);\n      const jspdfModule = await import('jspdf');\n      const jsPDF = jspdfModule && (jspdfModule.jsPDF || jspdfModule.default || jspdfModule);\n      if (html2canvas && jsPDF) {\n        const canvas = await html2canvas(selectedInvoiceRef.current, { scale: 2 });\n        const imgData = canvas.toDataURL('image/png');\n        const pdf = new jsPDF({ unit: 'pt', format: 'a4' });\n        const imgProps = pdf.getImageProperties(imgData);\n        const pageWidth = pdf.internal.pageSize.getWidth();\n        const pageHeight = pdf.internal.pageSize.getHeight();\n        const scale = Math.min(pageWidth / imgProps.width, pageHeight / imgProps.height);\n        const renderWidth = imgProps.width * scale;\n        const renderHeight = imgProps.height * scale;\n        const x = (pageWidth - renderWidth) / 2;\n        const y = (pageHeight - renderHeight) / 2;\n        pdf.addImage(imgData, 'PNG', x, y, renderWidth, renderHeight);\n        pdf.save(`${inv.id}.pdf`);\n      }\n    } catch (err) { console.error('PDF generation error', err); }\n  }\n\n  // --- Pure helper functions for tests ---\n  function pureAddToCart(productsArr, cartArr, productId) {\n    const p = productsArr.find(x => x.id === productId); \n    if (!p) throw new Error('product-not-found');\n    if (p.stock <= 0) throw new Error('out-of-stock');\n    const newProducts = productsArr.map(x => x.id === productId ? { ...x, stock: x.stock - 1 } : x);\n    const found = cartArr.find(c => c.productId === productId);\n    const newCart = found ? cartArr.map(c => c.productId === productId ? { ...c, qty: c.qty + 1 } : c) : [...cartArr, { productId, name: p.name, price: p.price, qty: 1 }];\n    return { products: newProducts, cart: newCart };\n  }\n\n  function pureChangeQty(productsArr, cartArr, productId, qty) {\n    qty = Math.max(0, parseInt(qty) || 0);\n    const item = cartArr.find(c => c.productId === productId);\n    if (!item) throw new Error('item-not-in-cart');\n    const delta = qty - item.qty;\n    if (delta > 0) {\n      const prod = productsArr.find(p => p.id === productId);\n      if (!prod || prod.stock < delta) throw new Error('not-enough-stock');\n      const newProducts = productsArr.map(p => p.id === productId ? { ...p, stock: p.stock - delta } : p);\n      const newCart = cartArr.map(c => c.productId === productId ? { ...c, qty } : c);\n      return { products: newProducts, cart: newCart };\n    } else if (delta < 0) {\n      const newProducts = productsArr.map(p => p.id === productId ? { ...p, stock: p.stock + (-delta) } : p);\n      const newCart = cartArr.map(c => c.productId === productId ? { ...c, qty } : c);\n      return { products: newProducts, cart: newCart };\n    }\n    return { products: productsArr, cart: cartArr };\n  }\n\n  function runTests() {\n    const results = [];\n    try {\n      const p0 = [{ id: 1, name: 'X', price: 100, stock: 2 }];\n      const c0 = [];\n      const step1 = pureAddToCart(p0, c0, 1);\n      results.push({ test: 'add once', pass: step1.products[0].stock === 1 && step1.cart.length === 1 && step1.cart[0].qty === 1 });\n      const step2 = pureAddToCart(step1.products, step1.cart, 1);\n      results.push({ test: 'add twice', pass: step2.products[0].stock === 0 && step2.cart[0].qty === 2 });\n      try {\n        pureAddToCart(step2.products, step2.cart, 1);\n        results.push({ test: 'add third time should fail', pass: false });\n      } catch (err) { results.push({ test: 'add third time should fail', pass: err.message === 'out-of-stock' }); }\n      const step3 = pureChangeQty(step2.products, step2.cart, 1, 1);\n      results.push({ test: 'change qty down', pass: step3.products[0].stock === 1 && step3.cart[0].qty === 1 });\n      const step4 = pureChangeQty(step3.products, step3.cart, 1, 2);\n      results.push({ test: 'change qty up', pass: step4.products[0].stock === 0 && step4.cart[0].qty === 2 });\n    } catch (err) { results.push({ test: 'unexpected error', pass: false, error: String(err) }); }\n    setTestResults(results);\n  }\n\n  // --- Render UI ---\n  return (\n    <div style={styles.page}>\n      <header style={styles.header}>\n        <div>\n          <h1 style={styles.company}>{COMPANY_NAME}</h1>\n          <div style={styles.subtitle}>Billing Â· Inventory Â· Categories Â· Auto-PDF Â· Auto-Save</div>\n        </div>\n        <div style={{ textAlign: 'right' }}>\n          <button style={styles.btnPrimary} onClick={() => exportBackup()}>Export Backup</button>\n          <button style={{ ...styles.btn, marginLeft: 8 }} onClick={() => runTests()}>Run tests</button>\n        </div>\n      </header>\n\n      <main style={styles.grid}>\n        <section style={styles.card}>\n          <h3>Products</h3>\n          <form onSubmit={addProduct} style={{ display: 'grid', gap: 8, marginTop: 8 }}>\n            <input placeholder=\"Name\" value={formProd.name} onChange={e => setFormProd(s => ({ ...s, name: e.target.value }))} style={styles.input} />\n            <input placeholder=\"Category\" value={formProd.category} onChange={e => setFormProd(s => ({ ...s, category: e.target.value }))} style={styles.input} />\n            <input placeholder=\"MRP\" value={formProd.mrp} onChange={e => setFormProd(s => ({ ...s, mrp: e.target.value }))} style={styles.input} />\n            <input placeholder=\"BV\" value={formProd.bv} onChange={e => setFormProd(s => ({ ...s, bv: e.target.value }))} style={styles.input} />\n            <input placeholder=\"Stock\" value={formProd.stock} onChange={e => setFormProd(s => ({ ...s, stock: e.target.value }))} style={styles.input} />\n            <div style={{ display: 'flex', gap: 8 }}>\n              <button type=\"submit\" style={styles.btnAdd}>Add Product</button>\n              <button type=\"button\" style={styles.btn} onClick={() => setProducts([])}>Clear All Products</button>\n            </div>\n          </form>\n\n          <hr style={{ margin: '12px 0' }} />\n\n          <div style={{ display: 'flex', gap: 8, marginBottom: 8 }}>\n            <select value={filterCategory} onChange={e => setFilterCategory(e.target.value)} style={styles.inputSmall}>\n              <option value=\"\">All categories</option>\n              {categories.map(c => <option key={c} value={c}>{c}</option>)}\n            </select>\n            <input placeholder=\"Search\" style={{ ...styles.inputSmall, flex: 1 }} />\n          </div>\n\n          <div style={{ maxHeight: 320, overflow: 'auto' }}>\n            {products.length === 0 && <div style={styles.muted}>No products</div>}\n            {products.filter(p => !filterCategory || p.category === filterCategory).map(p => (\n              <div key={p.id} style={styles.itemRow}>\n                <div>\n                  <div style={{ fontWeight: 700 }}>{p.name}</div>\n                  <div style={styles.small}>\n                    {p.category} Â· MRP: â‚¹{Number(p.mrp ?? (p.price ? (Number(p.price) / 0.9) : 0)).toFixed(2)} Â· DP: â‚¹{Number(p.price ?? 0).toFixed(2)} Â· BV: {Number(p.bv ?? 0)} Â· Stock: {p.stock}\n                  </div>\n                </div>\n                <div style={{ display: 'flex', gap: 6 }}>\n                  <button style={styles.btnPrimarySmall} onClick={() => addToCart(p.id)}>Add to Invoice</button>\n                  <button style={styles.btnSmall} onClick={() => { const q = parseInt(prompt('Purchase qty', '1') || '0'); if (q>0) updateStock(p.id, q); }}>Purchase+</button>\n                  <button style={styles.btnWarn} onClick={() => deleteProduct(p.id)}>Delete</button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </section>\n\n        <section style={{ ...styles.card, flex: 1 }}>\n          <h3>Create Invoice</h3>\n          <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\n            <input placeholder=\"Customer name\" value={customer.name} onChange={e => setCustomer(s => ({ ...s, name: e.target.value }))} style={styles.input} />\n            <input placeholder=\"Customer phone\" value={customer.phone} onChange={e => setCustomer(s => ({ ...s, phone: e.target.value }))} style={styles.input} />\n            <input placeholder=\"Customer address\" value={customer.address} onChange={e => setCustomer(s => ({ ...s, address: e.target.value }))} style={styles.input} />\n          </div>\n          \n          <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\n            <input type=\"date\" value={invoiceDate} onChange={e => setInvoiceDate(e.target.value)} style={{ ...styles.input, width: '200px', flex: 'none' }} />\n            <div style={{ ...styles.input, display: 'flex', alignItems: 'center', color: '#666', flex: 1, justifyContent: 'center' }}>\n              Invoice Date\n            </div>\n          </div>\n\n          <div style={{ display: 'flex', gap: 8, marginTop: 8, alignItems: 'center' }}>\n            <label style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\n              <input \n                type=\"checkbox\" \n                checked={useMRP} \n                onChange={e => setUseMRP(e.target.checked)}\n                style={{ margin: 0 }}\n              />\n              Use MRP for billing (instead of DP)\n            </label>\n          </div>\n\n          <div ref={invoiceRef} style={{ marginTop: 12, padding: 12, border: '1px solid #ddd', borderRadius: 6, background: '#fff' }}>\n            <Invoice \n              invoice={{\n                id: 'INV-' + new Date().getTime().toString().slice(-8),\n                date: new Date(invoiceDate).toISOString(),\n                customer: customer,\n                items: cart.map(c => ({ \n                  productId: c.productId, \n                  name: c.name, \n                  qty: c.qty, \n                  price: useMRP ? c.mrp : c.price, \n                  mrp: c.mrp, \n                  bv: c.bv \n                }))\n              }}\n              companyName={COMPANY_NAME}\n              companyEmail={COMPANY_EMAIL}\n              companyPhone={COMPANY_PHONE}\n              companyAddress={COMPANY_ADDRESS}\n            />\n            \n            <div style={{ marginTop: 20, display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }}>\n              <div style={{ textAlign: 'right' }}>\n                <div style={{ marginTop: 8, fontWeight: 800 }}>Balance: â‚¹{(subtotal() - Number(paid || 0)).toFixed(2)}</div>\n              </div>\n            </div>\n          </div>\n\n          <div style={{ marginTop: 12, display: 'flex', gap: 8 }}>\n            <button \n              style={styles.btnPrimary} \n              onClick={() => finalizeInvoice(true)}\n              disabled={isFinalizing}\n            >\n              {isFinalizing ? 'Finalizing...' : 'Finalize Invoice (Auto-save & PDF)'}\n            </button>\n            <button style={styles.btn} onClick={() => { setCart([]); }}>Clear Cart</button>\n            <button style={styles.btnWarn} onClick={() => { if (!confirm('Clear all invoices?')) return; setInvoices([]); localStorage.removeItem('rk_invoices'); }}>Clear Invoices</button>\n          </div>\n\n          <hr style={{ margin: '12px 0' }} />\n\n          <h4>Invoices History</h4>\n          \n          {/* Summary Statistics */}\n          {invoices.length > 0 && (\n            <div style={{ marginBottom: 12, padding: 12, backgroundColor: '#f8f9fa', borderRadius: 6, border: '1px solid #e9ecef' }}>\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 12, textAlign: 'center' }}>\n                <div>\n                  <div style={{ fontSize: 18, fontWeight: 700, color: '#1e3a8a' }}>{getInvoiceSummary().totalInvoices}</div>\n                  <div style={styles.small}>Total Invoices</div>\n                </div>\n                <div>\n                  <div style={{ fontSize: 18, fontWeight: 700, color: '#28a745' }}>â‚¹{getInvoiceSummary().totalBalance.toFixed(2)}</div>\n                  <div style={styles.small}>Total Balance</div>\n                </div>\n                <div>\n                  <div style={{ fontSize: 18, fontWeight: 700, color: '#dc3545' }}>{getInvoiceSummary().totalProductsSold}</div>\n                  <div style={styles.small}>Products Sold</div>\n                </div>\n              </div>\n              <div style={{ marginTop: 8, textAlign: 'center' }}>\n                <button \n                  style={{ ...styles.btnPrimary, marginRight: 8 }} \n                  onClick={exportAllInvoicesPDF}\n                  disabled={isExportingBulk}\n                >\n                  {isExportingBulk ? 'Exporting...' : 'Export All PDFs (ZIP)'}\n                </button>\n              </div>\n            </div>\n          )}\n\n          <div style={{ maxHeight: 160, overflow: 'auto' }}>\n            {invoices.length === 0 && <div style={styles.muted}>No invoices yet</div>}\n            {invoices.map(inv => (\n              <div key={inv.id} style={{ padding: 8, borderBottom: '1px solid #f0f0f0', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div>\n                  <div style={{ fontWeight: 700 }}>{inv.id}</div>\n                  <div style={styles.small}>{new Date(inv.date).toLocaleString()}</div>\n                  <div style={styles.small}>Items: {inv.items?.reduce((sum, item) => sum + item.qty, 0) || 0}</div>\n                </div>\n                <div style={{ textAlign: 'right' }}>\n                  <div>Subtotal: â‚¹{Number(inv.subtotal).toFixed(2)}</div>\n                  <div style={styles.small}>Balance: â‚¹{Number(inv.balance).toFixed(2)}</div>\n                  <div style={{ marginTop: 6 }}>\n                    <button style={styles.btnSmall} onClick={() => viewInvoice(inv)}>View</button>\n                    <button style={{ ...styles.btnSmall, marginLeft: 6 }} onClick={() => downloadInvoiceJSON(inv)}>JSON</button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n        </section>\n      </main>\n\n      {/* Invoice Viewer Modal */}\n      {selectedInvoice && (\n        <div style={styles.modalOverlay} onClick={closeInvoiceViewer}>\n          <div style={styles.modal} onClick={e => e.stopPropagation()}>\n            <div ref={selectedInvoiceRef}>\n              <Invoice \n                invoice={selectedInvoice}\n                companyName={COMPANY_NAME}\n                companyEmail={COMPANY_EMAIL}\n                companyPhone={COMPANY_PHONE}\n                companyAddress={COMPANY_ADDRESS}\n              />\n            </div>\n\n            <div style={{ marginTop: 12, display: 'flex', justifyContent: 'flex-end', gap: 8 }}>\n              <button style={styles.btn} onClick={() => downloadInvoiceJSON(selectedInvoice)}>Download JSON</button>\n              <button style={styles.btnPrimary} onClick={() => downloadInvoicePDF(selectedInvoice)}>Download PDF</button>\n              <button style={styles.btnWarn} onClick={() => closeInvoiceViewer()}>Close</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Test results display */}\n      {testResults.length > 0 && (\n        <div style={styles.testBox}>\n          <strong>Test results:</strong>\n          <ul>\n            {testResults.map((t, i) => (\n              <li key={i} style={{ color: t.pass ? 'green' : 'crimson' }}>{t.test}: {t.pass ? 'PASS' : 'FAIL'} {t.error ? `(${t.error})` : ''}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      <footer style={{ marginTop: 18, textAlign: 'center', color: '#666' }}>{COMPANY_NAME} â€” Billing software</footer>\n    </div>\n  );\n}\n\nconst styles = {\n  page: { padding: 18, fontFamily: 'system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial', background: '#f6f8fa', minHeight: '100vh' },\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 },\n  company: { fontSize: 20, fontWeight: 800, letterSpacing: 0.4 },\n  subtitle: { color: '#666', marginTop: 4 },\n  grid: { display: 'grid', gridTemplateColumns: '360px 1fr', gap: 16 },\n  card: { background: '#fff', padding: 12, borderRadius: 8, boxShadow: '0 1px 4px rgba(0,0,0,0.06)' },\n  input: { width: '100%', padding: 8, borderRadius: 6, border: '1px solid #ddd' },\n  inputSmall: { padding: 8, borderRadius: 6, border: '1px solid #ddd', minWidth: 140 },\n  btn: { padding: '8px 10px', borderRadius: 6, border: '1px solid #ccc', background: '#fff', cursor: 'pointer' },\n  btnAdd: { padding: '8px 10px', borderRadius: 6, border: 'none', background: '#2f9e44', color: '#fff', cursor: 'pointer' },\n  btnPrimary: { padding: '8px 12px', borderRadius: 6, border: 'none', background: '#0b63c6', color: '#fff', cursor: 'pointer' },\n  btnPrimarySmall: { padding: '6px 8px', borderRadius: 6, border: 'none', background: '#0b63c6', color: '#fff', cursor: 'pointer' },\n  btnSmall: { padding: '6px 8px', borderRadius: 6, border: '1px solid #ccc', background: '#fff', cursor: 'pointer' },\n  btnWarn: { padding: '8px 12px', borderRadius: 6, border: 'none', background: '#d97706', color: '#fff', cursor: 'pointer' },\n  muted: { color: '#777' },\n  small: { color: '#666', fontSize: 12 },\n  itemRow: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: 8, borderBottom: '1px solid #f0f0f0' },\n  td: { padding: 8, textAlign: 'left', borderRight: 'none' },\n  modalOverlay: { position: 'fixed', left: 0, top: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.4)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000 },\n  modal: { background: '#fff', padding: 16, borderRadius: 8, width: '90%', maxWidth: 800, maxHeight: '90%', overflow: 'auto' },\n  testBox: { position: 'fixed', right: 12, bottom: 12, background: '#fff', padding: 12, borderRadius: 8, boxShadow: '0 2px 8px rgba(0,0,0,0.12)' }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}